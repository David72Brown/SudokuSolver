#include "Data.h"

uint16 Grid[9][9][9];
uchar GridHeight;
tCageData CageData;

const uchar GrayCodeBitsToIncrement[] = {
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,8,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,
    0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0
};

const tTestSudoku TestSudokus[] = {
    {{
        SUDOKU_2D, DIAGONALS,
        {{
            " 2 | 8 |  5",
            "  7| 3 |   ",
            "  3| 6 | 72",
            " 7 |  9| 5 ",
            "  4|   |2  ",
            " 6 |3  | 9 ",
            "19 | 7 |5  ",
            "   | 9 |7  ",
            "7  | 4 | 1 "
        }}},
        {{
                            "629|781|345",
                            "487|532|961",
                            "513|964|872",
                            "378|429|156",
                            "954|816|237",
                            "261|357|498",
                            "192|673|584",
                            "846|195|723",
                            "735|248|619"
        }}
    },
    {{
        SUDOKU_2D, NO_DIAGONALS,
        {{
            "   |26 |7 1",
            "68 | 7 | 9 ",
            "19 |  4|5  ",
            "82 |1  | 4 ",
            "  4|6 2|9  ",
            " 5 |  3| 28",
            "  9|3  | 74",
            " 4 | 5 | 36",
            "7 3| 18|   "
        }}},
        {{
                            "435|269|781",
                            "682|571|493",
                            "197|834|562",
                            "826|195|347",
                            "374|682|915",
                            "951|743|628",
                            "519|326|874",
                            "248|957|136",
                            "763|418|259"
        }}
    },
    {{
        SUDOKU_2D, NO_DIAGONALS,
        {{
            "   |   |68 ",
            "   | 73|  9",
            "3 9|   | 45",
            "49 |   |   ",
            "8 3| 5 |9 2",
            "   |   | 36",
            "96 |   |3 8",
            "7  |68 |   ",
            " 28|   |   "
        }}},
        {{
                            "172|549|683",
                            "645|873|219",
                            "389|261|745",
                            "496|327|851",
                            "813|456|972",
                            "257|198|436",
                            "964|715|328",
                            "731|682|594",
                            "528|934|167"
        }}
    },
    {{
        SUDOKU_2D, DIAGONALS,
        {{
            "49 |  8|1 5",
            "   |   | 7 ",
            "  1| 5 | 3 ",
            " 49| 72|  8",
            "  3|   |7  ",
            "2  |18 |54 ",
            " 6 | 9 |2  ",
            " 3 |   |   ",
            "9 2|4  | 67"
        }}},
        {{
                            "497|638|125",
                            "358|241|976",
                            "621|957|834",
                            "549|372|618",
                            "813|564|792",
                            "276|189|543",
                            "764|893|251",
                            "135|726|489",
                            "982|415|367"
        }}
    },
    {{
        SUDOKU_2D, DIAGONALS,
        {{
            "   |   |125",
            "   |  5|   ",
            "6  |   | 94",
            "  5|9  |27 ",
            "   | 7 |   ",
            " 92|  8|4  ",
            "37 |   |  8",
            "   |7  |   ",
            "918|   |   "
        }}},
        {{
                            "487|396|125",
                            "239|415|687",
                            "651|827|394",
                            "865|934|271",
                            "143|672|859",
                            "792|158|436",
                            "376|249|518",
                            "524|781|963",
                            "918|563|742"
        }}
    },
    {{
        SUDOKU_2D, NO_DIAGONALS,
        {{
            "8  |   |   ",   // "World's Hardest"
            "  3|6  |   ",
            " 7 | 9 |2  ",
            " 5 |  7|   ",
            "   | 45|7  ",
            "   |1  | 3 ",
            "  1|   | 68",
            "  8|5  | 1 ",
            " 9 |   |4  "
        }}},
        {{
                            "812|753|649",
                            "943|682|175",
                            "675|491|283",
                            "154|237|896",
                            "369|845|721",
                            "287|169|534",
                            "521|974|368",
                            "438|526|917",
                            "796|318|452"
        }}
    },
    {{
        SUDOKU_3D, NO_DIAGONALS,
        {{
            "   |   | 6 ",
            "   |   |   ",
            "   |   |   ",
            "92 |   |   ",
            " 5 |  4|   ",
            "   |   |   ",
            " 3 |   | 8 ",
            "   |   |   ",
            "   |   |   "
        },{
            "   |   |   ",
            " 3 |   |   ",
            "   |   |   ",
            "   |  1|   ",
            "   |   |   ",
            "   |   |   ",
            "  4|   |   ",
            "9  |   |   ",
            "   |   |   "
        },{
            "   |   |4  ",
            "   |  8|   ",
            "  3|   |   ",
            " 4 |   |   ",
            "   |   |   ",
            " 3 |   |   ",
            "   |  1|   ",
            "3  |   |   ",
            "   |   |   "
        },{
            "   |   |   ",
            "   |   |2 8",
            "   | 3 |   ",
            "7  |   |   ",
            "   |   |   ",
            "  8|   |4  ",
            "   | 5 |7  ",
            "   |   |   ",
            " 3 |   |   "
        },{
            "   |   | 2 ",
            "   |   |   ",
            "  4|   |359",
            "   | 5 |6  ",
            "   |   |   ",
            "   |   |   ",
            "   |  2|   ",
            "   |  5| 7 ",
            "   |  1|2  "
        },{
            " 8 |  9|   ",
            "   | 2 |   ",
            "  9|   |6  ",
            "   | 8 |   ",
            "   |   |   ",
            "   |   |   ",
            "  8|   |   ",
            "   |   |   ",
            "   |   |   "
        },{
            "   |  7|   ",
            "  6|3  | 4 ",
            " 4 |   | 3 ",
            "   |   |   ",
            " 7 |6  |   ",
            " 6 |9  |   ",
            " 1 |   |8 9",
            "  4|  8|   ",
            "   |   |   "
        },{
            "   |   |   ",
            "4  |   |   ",
            "   | 4 | 6 ",
            "6  |  8| 57",
            "   |  3|   ",
            " 5 |   |   ",
            "   |   |   ",
            "   |4  |9  ",
            "  6|   |   "
        },{
            "   |   |3  ",
            "  3|1  |   ",
            "   |   |   ",
            "   | 1 | 8 ",
            "   |   |   ",
            "  9|35 | 4 ",
            "   |   | 7 ",
            "8  |   |   ",
            "  1|   |   "
        }}},
        {{
                            "395|741|268",
                            "862|935|174",
                            "471|682|593",
                            "928|573|416",
                            "753|164|829",
                            "614|298|357",
                            "137|426|985",
                            "246|859|731",
                            "589|317|642"
        },{
                            "147|826|935",
                            "539|417|682",
                            "286|359|741",
                            "375|641|298",
                            "461|982|573",
                            "892|735|164",
                            "624|598|317",
                            "958|173|426",
                            "713|264|859"
        },{
                            "628|593|417",
                            "714|268|359",
                            "953|174|826",
                            "146|829|735",
                            "289|357|641",
                            "537|416|982",
                            "895|731|264",
                            "371|642|598",
                            "462|985|173"
        },{
                            "471|682|593",
                            "395|741|268",
                            "862|935|174",
                            "753|164|829",
                            "614|298|357",
                            "928|573|416",
                            "246|859|731",
                            "589|317|642",
                            "137|426|985"
        },{
                            "953|174|826",
                            "628|593|417",
                            "714|268|359",
                            "289|357|641",
                            "537|416|982",
                            "146|829|735",
                            "371|642|598",
                            "462|985|173",
                            "895|731|264"
        },{
                            "286|359|741",
                            "147|826|935",
                            "539|417|682",
                            "461|982|573",
                            "892|735|164",
                            "375|641|298",
                            "958|173|426",
                            "713|264|859",
                            "624|598|317"
        },{
                            "539|417|682",
                            "286|359|741",
                            "147|826|935",
                            "892|735|164",
                            "375|641|298",
                            "461|982|573",
                            "713|264|859",
                            "624|598|317",
                            "958|173|426"
        },{
                            "862|935|174",
                            "471|682|593",
                            "395|741|268",
                            "614|298|357",
                            "928|573|416",
                            "753|164|829",
                            "589|317|642",
                            "137|426|985",
                            "246|859|731"
        },{
                            "714|268|359",
                            "953|174|826",
                            "628|593|417",
                            "537|416|982",
                            "146|829|735",
                            "289|357|641",
                            "462|985|173",
                            "895|731|264",
                            "371|642|598"
        }}
    },
    {{
        SUDOKU_KILLER, NO_DIAGONALS,
        {{
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   "
        }},
        {
            "AA AA AB AB AC AC AD AD AE", // Format is 9 x <2-char cage tag> separated by single chars of any value.
            "AA AG AB AI AC AK AK AD AE", // Use whatever 2-char tags you want.
            "AF AG AH AI AJ AJ AK AL AE",
            "AF AG AH AH AJ AM AM AL AN",
            "AO AP AP AR AR AM AU AL AN",
            "AO AO AQ AR AS AT AU AW AN",
            "AX AX AQ AS AS AT AV AW AW",
            "AX AX AZ AZ AZ AZ AV AW AW",
            "AY AY AY AY AZ BA BA BB BB"
        },
        {
            { "AA", 15 },
            { "AB", 19 },
            { "AC", 16 },
            { "AD",  8 },
            { "AE", 19 },
            { "AF",  7 },
            { "AG", 15 },
            { "AH", 16 },
            { "AI",  4 },
            { "AJ", 16 },
            { "AK", 18 },
            { "AL", 12 },
            { "AM", 17 },
            { "AN", 17 },
            { "AO", 17 },
            { "AP", 10 },
            { "AQ",  6 },
            { "AR", 20 },
            { "AS",  9 },
            { "AT",  7 },
            { "AU",  7 },
            { "AV", 12 },
            { "AW", 26 },
            { "AX", 23 },
            { "AY", 21 },
            { "AZ", 26 },
            { "BA", 12 },
            { "BB", 10 }
        }},
        {{
                            "863|975|214",
                            "127|346|958",
                            "459|182|367",
                            "385|261|749",
                            "746|859|123",
                            "912|734|685",
                            "294|513|876",
                            "571|698|432",
                            "638|427|591"
        }}
    },
    {{
        SUDOKU_KILLER, NO_DIAGONALS,
        {{
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   ",
            "   |   |   "
        }},
        {
            "AA AA EE EE FF FF FF FF KK",
            "AA EE EE II JJ JJ KK KK KK",
            "BB BB GG II JJ VV VV WW WW",
            "BB GG GG OO OO VV WW WW UU",
            "BB GG HH HH OO PP PP QQ UU",
            "BB CC CC LL OO OO QQ QQ UU",
            "CC CC LL LL NN RR QQ UU UU",
            "DD DD DD NN NN RR SS SS TT",
            "DD MM MM MM MM SS SS TT TT"
        },
        {
            { "AA", 17 },
            { "BB", 21 },
            { "CC", 20 },
            { "DD", 18 },
            { "EE", 22 },
            { "FF", 17 },
            { "GG", 21 },
            { "HH", 16 },
            { "II",  7 },
            { "JJ", 24 },
            { "KK", 16 },
            { "LL", 19 },
            { "MM", 15 },
            { "NN", 16 },
            { "OO", 18 },
            { "PP", 13 },
            { "QQ", 16 },
            { "RR",  8 },
            { "SS", 14 },
            { "TT", 23 },
            { "UU", 25 },
            { "VV", 16 },
            { "WW", 23 }
        }},
        {{
                            "918|342|657",
                            "756|189|324",
                            "432|675|891",
                            "849|513|762",
                            "167|928|543",
                            "523|764|918",
                            "694|831|275",
                            "285|497|136",
                            "371|256|489"
        }}
    }
};
const uchar NumTestSudokus = sizeof(TestSudokus) / sizeof(TestSudokus[0]);
